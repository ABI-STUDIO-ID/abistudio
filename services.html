<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HR1R62CT8X"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-HR1R62CT8X'); 
    </script>
    
    <title>Layanan & Harga - ABI STUDIO</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="logo.png">

    <meta name="description" content="Daftar paket harga jasa arsitek, desain interior, dan konstruksi bangunan ABI STUDIO. Transparan, terperinci, dan profesional.">
    <meta name="keywords" content="harga jasa arsitek, biaya desain interior, paket bangun rumah, jasa renovasi tangerang, konsultan perizinan bangunan">
    <meta name="author" content="ABI STUDIO">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { abi: { teal: '#4A6D6D', dark: '#1a1a1a', light: '#f8f9fa' } },
                    fontFamily: { sans: ['"Plus Jakarta Sans"', 'sans-serif'] }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        body { background-color: #ffffff; color: #1a1a1a; overflow-x: hidden; font-size: 16px; font-family: 'Plus Jakarta Sans', sans-serif; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .tab-active { background-color: #4A6D6D; color: white; border-color: #4A6D6D; }
        .tab-inactive { background-color: white; color: #1a1a1a; border-color: #e5e7eb; }
        .tab-inactive:hover { border-color: #4A6D6D; color: #4A6D6D; }
        .modal { transition: opacity 0.25s ease; }
        body.modal-active { overflow-x: hidden; overflow-y: hidden !important; }
        .lang-btn { cursor: pointer; font-weight: bold; padding: 0 5px; transition: color 0.3s; }
        .lang-btn.active { color: #4A6D6D; border-bottom: 2px solid #4A6D6D; }
    </style>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = { apiKey: "AIzaSyC9JW1Rc3VFnJRYofHiorqDN4MWHjBrVi0", authDomain: "abistudio-db.firebaseapp.com", projectId: "abistudio-db", storageBucket: "abistudio-db.firebasestorage.app", messagingSenderId: "249751405902", appId: "1:249751405902:web:6061648be8e6a51a69ca1f" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
    </script>
</head>
<body>

    <nav class="fixed w-full top-0 z-[50] bg-white/90 backdrop-blur-md shadow-sm border-b border-gray-100 transition-all duration-300">
        <div class="container mx-auto px-6 py-2 flex justify-between items-center">
            <a href="index.html" class="flex items-center"><img src="logo.png" alt="ABI STUDIO" class="h-28 w-auto object-contain"></a>
            
            <div class="hidden md:flex space-x-8 text-sm font-bold uppercase tracking-[0.15em] text-gray-700 items-center">
    <a href="index.html" class="hover:text-abi-teal transition pb-1" data-i18n="nav_home">Home</a>
    <a href="about.html" class="hover:text-abi-teal transition pb-1" data-i18n="nav_about">About</a>
    <a href="services.html" class="text-abi-teal transition pb-1" data-i18n="nav_services">Layanan & Harga</a>
    <a href="portfolio.html" class="hover:text-abi-teal transition pb-1" data-i18n="nav_portfolio">Portfolio</a>
    <a href="blog.html" class="hover:text-abi-teal transition pb-1" data-i18n="nav_blog">Blog</a>
    <a href="https://wa.me/6285157577465" target="_blank" class="bg-abi-teal text-white px-6 py-2 rounded-full hover:bg-abi-dark transition text-xs md:text-sm" data-i18n="nav_contact">Contact</a>
    
    <div class="flex items-center border-l pl-4 border-gray-300 space-x-2">
        <span onclick="changeLanguage('id')" class="lang-btn active" id="btn-id">ID</span>
        <span class="text-gray-300">|</span>
        <span onclick="changeLanguage('en')" class="lang-btn" id="btn-en">EN</span>
    </div>
</div>
            
            <button class="md:hidden text-abi-teal text-2xl" onclick="document.getElementById('mobileMenu').classList.toggle('hidden')"><i class="fas fa-bars"></i></button>
        </div>
        
        <div id="mobileMenu" class="hidden md:hidden absolute w-full bg-white text-black py-4 px-6 shadow-2xl border-t">
            <div class="flex flex-col space-y-4 text-sm font-bold uppercase tracking-widest text-center">
                <a href="index.html" class="hover:text-abi-teal py-2" data-i18n="nav_home">Home</a>
                <a href="about.html" class="hover:text-abi-teal py-2" data-i18n="nav_about">About</a>
                <a href="services.html" class="text-abi-teal py-2" data-i18n="nav_services">Layanan & Harga</a>
                <a href="portfolio.html" class="hover:text-abi-teal py-2" data-i18n="nav_portfolio">Portfolio</a>
                <a href="blog.html" class="hover:text-abi-teal py-2" data-i18n="nav_blog">Blog</a>
            </div>
        </div>
    </nav>

    <header class="pt-40 pb-20 px-6 bg-abi-dark text-white text-center">
        <div class="container mx-auto">
            <span class="text-abi-teal text-xs font-bold uppercase tracking-[0.3em]">Our Services</span>
            <h1 class="text-4xl md:text-6xl font-light mt-4 mb-6" data-i18n="header_title">Pilih Kebutuhan Anda</h1>
            <p class="text-gray-400 max-w-2xl mx-auto text-lg font-light" data-i18n="header_desc">Pilih kategori layanan di bawah untuk melihat detail paket dan harga.</p>
        </div>
    </header>

    <section class="py-20 px-6 bg-gray-50 min-h-screen">
        <div class="container mx-auto max-w-6xl">
            <div class="flex flex-wrap justify-center gap-4 mb-12">
                <button onclick="filterCategory('design')" id="btn-design" class="tab-active px-8 py-4 rounded-full border-2 text-sm font-bold uppercase tracking-widest transition duration-300 shadow-sm flex items-center"><i class="fas fa-pen-ruler mr-3"></i> Design & Planning</button>
                <button onclick="filterCategory('construction')" id="btn-construction" class="tab-inactive px-8 py-4 rounded-full border-2 text-sm font-bold uppercase tracking-widest transition duration-300 shadow-sm flex items-center"><i class="fas fa-hammer mr-3"></i> Construction</button>
                <button onclick="filterCategory('consultant')" id="btn-consultant" class="tab-inactive px-8 py-4 rounded-full border-2 text-sm font-bold uppercase tracking-widest transition duration-300 shadow-sm flex items-center"><i class="fas fa-file-contract mr-3"></i> Consultant & Audit</button>
            </div>
            
            <div id="services-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
        </div>
    </section>

    <div id="orderModal" class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-[100]">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
        <div class="modal-container bg-white w-11/12 md:max-w-lg mx-auto rounded-2xl shadow-2xl z-50 overflow-y-auto max-h-[90vh]">
            <div class="modal-content py-6 text-left px-6">
                <div class="flex justify-between items-center pb-3">
                    <p class="text-2xl font-bold text-abi-dark">Formulir Konsultasi</p>
                    <div class="modal-close cursor-pointer z-50" onclick="closeModal()"><i class="fas fa-times text-gray-500 hover:text-red-500 text-xl"></i></div>
                </div>
                <p class="text-sm text-gray-500 mb-6">Lengkapi data untuk mendapatkan penawaran resmi.</p>
                <form id="consultationForm" onsubmit="submitToWA(event)">
                    <div class="space-y-4">
                        <div><label class="block text-gray-700 text-sm font-bold mb-2">Nama Lengkap</label><input type="text" id="clientName" required class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-200 focus:border-abi-teal focus:bg-white focus:outline-none transition" placeholder="Contoh: Budi Santoso"></div>
                        <div><label class="block text-gray-700 text-sm font-bold mb-2">Nomor WhatsApp</label><input type="tel" id="clientWA" required class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-200 focus:border-abi-teal focus:bg-white focus:outline-none transition" placeholder="Contoh: 08123456789"></div>
                        
                        <div><label class="block text-gray-700 text-sm font-bold mb-2">Layanan Utama</label><input type="text" id="selectedService" readonly class="w-full px-4 py-3 rounded-lg bg-gray-100 border border-gray-200 text-gray-500 font-bold cursor-not-allowed"></div>
                        
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">Pilih Detail / Paket</label>
                            <div class="relative">
                                <select id="packageSelect" class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-200 focus:border-abi-teal focus:bg-white focus:outline-none transition appearance-none cursor-pointer">
                                    <option value="" disabled selected>-- Pilih Spesifikasi --</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-700"><i class="fas fa-chevron-down text-xs"></i></div>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div><label class="block text-gray-700 text-sm font-bold mb-2">Domisili Proyek</label><input type="text" id="projectLoc" required class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-200 focus:border-abi-teal focus:bg-white focus:outline-none transition" placeholder="Cth: BSD"></div>
                            <div><label class="block text-gray-700 text-sm font-bold mb-2">Est. Luas (mÂ²)</label><input type="number" id="projectArea" class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-200 focus:border-abi-teal focus:bg-white focus:outline-none transition" placeholder="Cth: 120"></div>
                        </div>
                        <div><label class="block text-gray-700 text-sm font-bold mb-2">Catatan Tambahan</label><textarea id="projectNote" rows="3" class="w-full px-4 py-3 rounded-lg bg-gray-50 border border-gray-200 focus:border-abi-teal focus:bg-white focus:outline-none transition" placeholder="Ceritakan detail kebutuhan Anda..."></textarea></div>
                    </div>
                    <div class="mt-8">
                        <button type="submit" class="w-full bg-abi-teal text-white font-bold py-4 rounded-lg hover:bg-abi-dark transition duration-300 shadow-lg flex justify-center items-center"><i class="fab fa-whatsapp text-xl mr-2"></i> Kirim Konsultasi</button>
                        <p class="text-center text-xs text-gray-400 mt-3">Data Anda aman. Admin kami akan segera membalas.</p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer id="contact" class="bg-abi-dark text-white py-20 px-6 border-t border-white/10 relative z-50">
        <div class="container mx-auto grid md:grid-cols-3 gap-12 text-base font-light">
            <div>
                <h5 class="text-xl font-bold mb-6">ABI STUDIO</h5>
                <a href="https://maps.app.goo.gl/hRz4h8xNWNQNWpV3A" target="_blank" class="opacity-80 leading-relaxed hover:text-abi-teal hover:opacity-100 transition flex items-start group text-base mb-6">
                    <i class="fas fa-map-marker-alt mt-1 mr-3 text-abi-teal group-hover:scale-110 transition"></i>
                    <span>Jl. Hidup Baru I No.8 Blok A49C, RT.09/RW.01,<br>Sudimara Pinang, Kec. Pinang,<br>Kota Tangerang, Banten 15145.</span>
                </a>
            </div>
            <div>
                <h5 class="text-xs uppercase tracking-[0.3em] font-bold mb-6 opacity-80">Contact Us</h5>
                <div class="space-y-6">
                    <div class="flex items-center opacity-80 hover:opacity-100 transition cursor-pointer" onclick="window.open('https://wa.me/6285157577465','_blank')">
                        <i class="fab fa-whatsapp mr-4 text-2xl"></i>
                        <div>
                            <p class="font-bold text-base">Angga Aditya Pratama, SE</p>
                            <p class="text-sm">Co-Founder & Head of Marketing</p>
                            <p class="text-sm mt-1">0851-5757-7465</p>
                        </div>
                    </div>
                    <div class="flex items-center opacity-80">
                        <i class="far fa-envelope mr-4 text-2xl"></i>
                        <a href="mailto:abi.studio.id@gmail.com" class="text-base hover:text-abi-teal transition">abi.studio.id@gmail.com</a>
                    </div>
                </div>
            </div>
            <div class="md:text-right flex flex-col justify-between">
                <div>
                    <h5 class="text-xs uppercase tracking-[0.3em] font-bold mb-6 opacity-80">Social</h5>
                    <div class="flex md:justify-end space-x-8 text-2xl opacity-80">
                        <a href="https://www.instagram.com/abi.studio.id/" target="_blank" class="hover:text-abi-teal transition"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <p class="text-xs uppercase tracking-[0.3em] opacity-50 mt-10">Â© 2026 ABI STUDIO</p>
            </div>
        </div>
    </footer>

    <script>
    // --- 1. SETTING BAHASA ---
    const translations = {
        id: {
            nav_home: "Home", nav_about: "About", nav_services: "Layanan & Harga", nav_portfolio: "Portfolio", nav_blog: "Blog & Artikel", nav_contact: "Contact",
            header_title: "Pilih Kebutuhan Anda", header_desc: "Pilih kategori layanan di bawah untuk melihat detail paket dan harga."
        },
        en: {
            nav_home: "Home", nav_about: "About", nav_services: "Services & Pricing", nav_portfolio: "Portfolio", nav_blog: "Blog & Insights", nav_contact: "Contact Us",
            header_title: "Choose Your Needs", header_desc: "Select a service category below to view packages and pricing."
        }
    };

    function changeLanguage(lang) {
        localStorage.setItem('selectedLang', lang); 
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[lang][key]) {
                el.innerText = translations[lang][key];
            }
        });
        document.getElementById('btn-id').classList.toggle('active', lang === 'id');
        document.getElementById('btn-en').classList.toggle('active', lang === 'en');
    }

    // --- 2. MOBILE MENU ---
    function toggleMobileMenu() { 
        const menu = document.getElementById('mobileMenu');
        if(menu) menu.classList.toggle('hidden'); 
    }

    // --- 3. DATA LAYANAN LENGKAP ---
    const servicesData = {
        design: [
            { title: "Desain Arsitektur", icon: "fas fa-home", desc: "Perencanaan bangunan estetik dan fungsional.", details: ["Pilihan Paket: Basic, Standard, Premium"], options: ["Paket Basic", "Paket Standard", "Paket Premium"], price: "Hubungi Admin" },
            { title: "Desain Interior", icon: "fas fa-couch", desc: "Menciptakan suasana ruang yang nyaman.", details: ["Paket Basic (3D View)", "Paket Advance (3D + Gambar Kerja)"], options: ["Paket Basic (3D View)", "Paket Advance (3D + Kerja)"], price: "Mulai Rp 25.000 /mÂ²" },
            { title: "Desain Struktur", icon: "fas fa-layer-group", desc: "Perhitungan kekuatan gedung, jalan, dan jembatan.", details: ["Gedung, Baja, Pabrik, Dermaga", "Jalan & Jembatan"], options: ["Gedung", "Baja", "Jalan", "Jembatan", "Dermaga", "Pabrik"], price: "Rp 8.500 - 15.000 /mÂ²" },
            { title: "Desain Landscape", icon: "fas fa-tree", desc: "Penataan area luar ruangan hunian atau komersil.", details: ["Type: Hunian & Komersil"], options: ["Type Hunian", "Type Komersil"], price: "Rp 15.000 /mÂ²" },
            { title: "Desain MEP", icon: "fas fa-bolt", desc: "Mekanikal, Elektrikal, dan Plumbing.", details: ["Spesifikasi: Elektrikal & Plumbing"], options: ["Elektrikal", "Plumbing", "Full MEP"], price: "Rp 15.000 /mÂ²" },
            { title: "Studi Kelayakan & RAB", icon: "fas fa-calculator", desc: "Estimasi biaya dan kelayakan proyek.", details: ["Pilihan: Paket Sipil & Paket Interior"], options: ["Paket Sipil", "Paket Interior"], price: "Rp 10.000 /mÂ²" }
        ],
        construction: [
            { title: "Pekerjaan Sipil & Bangunan", icon: "fas fa-hard-hat", desc: "Konstruksi fisik bangunan dari nol.", details: ["Rumah Tinggal, Ruko, Kantor", "Sekolah, Ibadah, Gedung Bertingkat"], options: ["Rumah Tinggal", "Ruko", "Kantor", "Sarana Pendidikan", "Sarana Ibadah", "Gedung Bertingkat"], price: "Sesuai RAB" },
            { title: "Struktur Beton & Baja", icon: "fas fa-girders", desc: "Pekerjaan struktur berat dan modifikasi.", details: ["Penambahan Ruang, Gudang, Mezzanine", "Penguatan Struktur, Tangga/Kanopi"], options: ["Penambahan Ruang/Lantai", "Pergudangan", "Mezzanine", "Penguatan Struktur", "Struktur Tangga/Kanopi Baja"], price: "Sesuai RAB" },
            { title: "Renovasi & Rehabilitasi", icon: "fas fa-tools", desc: "Perbaikan sebagian atau menyeluruh.", details: ["Dapur, Plafon, Atap, Dinding", "Kamar Mandi, Struktur Ringan"], options: ["Perbaikan Dapur", "Perbaikan Plafon", "Perbaikan Atap/Dak", "Perbaikan Dinding", "Renovasi Kamar Mandi", "Perbaikan Struktur Ringan"], price: "Sesuai Survey" },
            { title: "Fit Out Interior", icon: "fas fa-paint-roller", desc: "Pengisian dan penyelesaian interior ruangan.", details: ["Hunian, Komersial, Kantor", "Cafe, Toko, Klinik"], options: ["Ruang Hunian", "Komersial", "Perkantoran", "Cafe", "Toko", "Klinik"], price: "Sesuai Desain" },
            { title: "Arsitektural & Finishing", icon: "fas fa-brush", desc: "Detail akhir untuk estetika bangunan.", details: ["Eksterior (Kanopi, Pagar, Kolam)", "Interior (Pintu, Jendela, Studio)"], options: ["Elemen Eksterior (Kanopi/Pagar)", "Elemen Interior (Pintu/Jendela)"], price: "Sesuai Spesifikasi" },
            { title: "Pemeliharaan Bangunan", icon: "fas fa-broom", desc: "Perawatan berkala agar bangunan tetap prima.", details: ["Pengecatan, Sanitary, Kebocoran", "Perawatan Atap & Gedung"], options: ["Pengecatan", "Sanitary", "Perbaikan Kebocoran", "Perawatan Atap", "Perawatan Berkala Gedung"], price: "Sesuai Survey" }
        ],
        consultant: [
            { title: "Konsultan Perizinan", icon: "fas fa-stamp", desc: "Pengurusan legalitas bangunan.", details: ["PBG, SLF, IMB lama ke PBG", "Pendampingan hingga terbit"], options: ["PBG", "SLF", "IMB Lama -> PBG", "Pendampingan Full"], price: "Hubungi Kami" },
            { title: "Supervisi & Manajemen", icon: "fas fa-tasks", desc: "Pengawasan proyek agar sesuai standar.", details: ["Kontrol Mutu, Waktu, & Biaya", "Laporan Harian/Mingguan/Bulanan"], options: ["Kontrol Mutu/Waktu/Biaya", "Laporan Berkala"], price: "Bulanan / Proyek" },
            { title: "Audit Teknis Bangunan", icon: "fas fa-search-location", desc: "Pemeriksaan kesehatan dan keamanan bangunan.", details: ["Audit Struktur", "Audit Fungsi Bangunan"], options: ["Audit Struktur", "Audit Fungsi Bangunan"], price: "Hubungi Kami" }
        ]
    };

    // --- 4. RENDER LAYANAN ---
    function renderServices(category) {
        const grid = document.getElementById('services-grid');
        if(!grid) return;
        grid.innerHTML = ''; 
        const data = servicesData[category];
        
        data.forEach((item, index) => {
            let detailsHtml = '<ul class="mt-4 space-y-2 mb-6 text-sm text-gray-600 bg-gray-50 p-4 rounded-lg">';
            item.details.forEach(det => { detailsHtml += `<li class="flex items-start"><i class="fas fa-check text-abi-teal mt-1 mr-2 text-xs"></i> <span>${det}</span></li>`; });
            detailsHtml += '</ul>';
            
            const card = `
                <div class="bg-white p-8 rounded-2xl shadow-sm hover:shadow-xl transition duration-300 border border-gray-100 flex flex-col fade-in" style="animation-delay: ${index * 100}ms">
                    <div class="w-14 h-14 bg-abi-teal/10 rounded-full flex items-center justify-center text-abi-teal text-2xl mb-6"><i class="${item.icon}"></i></div>
                    <h3 class="text-xl font-bold text-abi-dark mb-2">${item.title}</h3>
                    <p class="text-gray-500 text-sm mb-4">${item.desc}</p>
                    <div class="mt-auto w-full">
                        <div class="border-t border-gray-100 pt-4">
                            <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Cakupan Layanan</span>
                            ${detailsHtml}
                            <div class="flex justify-between items-center mt-4">
                                <span class="font-bold text-abi-teal text-sm bg-abi-teal/5 px-3 py-1 rounded-full">${item.price}</span>
                                <button onclick="openModal('${category}', ${index})" class="bg-abi-dark text-white hover:bg-abi-teal px-4 py-2 rounded-lg text-sm font-bold transition cursor-pointer">
                                    Pilih Layanan <i class="fas fa-arrow-right ml-1"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>`;
            grid.innerHTML += card;
        });
    }

    function filterCategory(category) {
        ['design', 'construction', 'consultant'].forEach(c => {
            const btn = document.getElementById(`btn-${c}`);
            if(btn) {
                if (c === category) { btn.classList.remove('tab-inactive'); btn.classList.add('tab-active'); } 
                else { btn.classList.remove('tab-active'); btn.classList.add('tab-inactive'); }
            }
        });
        renderServices(category);
    }

    // --- 5. LOGIKA MODAL ---
    const modal = document.getElementById('orderModal');
    const body = document.querySelector('body');
    const serviceInput = document.getElementById('selectedService');
    const packageSelect = document.getElementById('packageSelect');

    function openModal(category, index) {
        if(!modal) return;
        
        const data = servicesData[category][index];
        serviceInput.value = data.title;
        packageSelect.innerHTML = '<option value="" disabled selected>-- Pilih Detail / Paket (Wajib) --</option>';
        
        if (data.options && data.options.length > 0) {
            data.options.forEach(opt => {
                const option = document.createElement('option');
                option.value = opt; 
                option.innerText = opt;
                packageSelect.appendChild(option);
            });
        } else {
            const option = document.createElement('option');
            option.value = "General Request";
            option.innerText = "General Request";
            packageSelect.appendChild(option);
        }

        modal.classList.remove('opacity-0', 'pointer-events-none');
        body.classList.add('modal-active');
    }

    function closeModal() {
        if(modal) {
            modal.classList.add('opacity-0', 'pointer-events-none');
            body.classList.remove('modal-active');
        }
    }
    
    if(modal) {
        modal.querySelector('.modal-overlay').addEventListener('click', closeModal);
    }

    // --- 6. SUBMIT TO FIREBASE & WA ---
    function submitToWA(e) {
        e.preventDefault();

        const name = document.getElementById('clientName').value;
        const wa = document.getElementById('clientWA').value;
        const service = document.getElementById('selectedService').value;
        const packageDetail = document.getElementById('packageSelect').value; 
        const loc = document.getElementById('projectLoc').value;
        const area = document.getElementById('projectArea').value;
        const note = document.getElementById('projectNote').value;

        // Validasi
        if (!packageDetail || packageDetail === "") {
            alert("Mohon pilih Detail / Paket Layanan terlebih dahulu.");
            document.getElementById('packageSelect').focus();
            return;
        }

        const btn = e.target.querySelector('button[type="submit"]');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Menyimpan...';
        btn.disabled = true;

        // SIMPAN KE FIREBASE
        db.collection("leads").add({
            nama_klien: name,
            no_hp: wa,
            jenis_bangunan: service,
            paket_dipilih: packageDetail,
            lokasi: loc,
            luas_bangunan: area,
            catatan: note,
            waktu_input: firebase.firestore.FieldValue.serverTimestamp()
        })
        .then((docRef) => {
            // Redirect WA setelah sukses simpan
            const message = `Halo ABI STUDIO, saya tertarik dengan layanan Anda.%0A%0A` +
                            `ðŸ“‹ *DATA KLIEN* %0A` +
                            `Nama: ${name}%0A` +
                            `No. WA: ${wa}%0A%0A` +
                            `ðŸ—ï¸ *DETAIL PROYEK* %0A` +
                            `Layanan Utama: ${service}%0A` +
                            `*Pilihan Paket/Tipe: ${packageDetail}*%0A` + 
                            `Domisili Proyek: ${loc}%0A` +
                            `Estimasi Luas: ${area} mÂ²%0A` +
                            `Catatan: ${note}%0A%0A` +
                            `Mohon info penawaran harganya. Terima kasih.`;
            
            window.open(`https://wa.me/6285157577465?text=${message}`, '_blank');
            
            e.target.reset();
            closeModal();
        })
        .catch((error) => {
            console.error("Error adding document: ", error);
            alert("Terjadi kesalahan sistem, namun kami akan tetap mengarahkan Anda ke WhatsApp.");
            window.open(`https://wa.me/6285157577465`, '_blank');
        })
        .finally(() => {
            btn.innerHTML = originalText;
            btn.disabled = false;
        });
    }

    // Init Script
    document.addEventListener('DOMContentLoaded', () => {
        const savedLang = localStorage.getItem('selectedLang') || 'id';
        changeLanguage(savedLang);
        if(document.getElementById('services-grid')) {
            filterCategory('design'); 
        }
    });
    </script>
</body>
</html>
